pkgname=switchres
pkgver=1.53.1
pkgrel=1
pkgdesc="Modeline generator engine and MAME resolution switcher"
url="http://forum.arcadecontrols.com/index.php/topic,106405.0.html"
license=(GPL3)
arch=(x86_64)
depends=(libxml2)
source=("https://gitlab.com/groovyarcade/tools/${pkgname}/-/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz")
sha256sums=('722aef5cde1e8d7d0f5a2bf36df126eb1e74170780ebac87aaf88bda2ee0890d')

prepare() {
  cd ${pkgname}-${pkgver}
  local src
  for src in "${source[@]}"; do
    src="${src%%::*}"
    src="${src##*/}"
    [[ $src = *.patch ]] || continue
    msg2 "Applying patch $src..."
    patch -Np1 < "../$src"
  done
}

build() {
  cd ${pkgname}-${pkgver}
  make
}

package ()
{
  cd "$srcdir/$pkgname-$pkgver"
  make PREFIX="$pkgdir/usr/local" install
}
