pkgname=attractplus
pkgver=3.0.0
pkgrel=1
_commit=0feb181c33a13d55b526bff132ac69c56a1ef0b1
pkgdesc="A graphical front-end for command line emulators that hides the underlying operating system and is intended to be controlled with a joystick or gamepad."
arch=('any')
url="http://www.attractmode.org/"
license=('GPL3')
depends=('attractplus-kms' 'attractplus-x11')
conflicts=('attractplus-git')
#replaces=('attract')
#source=("${pkgname}::git+https://github.com/oomek/attractplus.git#commit=${_commit}"
source=("${pkgname}::git+https://github.com/oomek/attractplus.git#tag=${pkgver}"
        "attractplus.sh")
sha256sums=('SKIP'
            'SKIP')
provides=('attract')
install=attractplus.install


package() {
	cd "${pkgname}"

	cat <<'EOF' >> Makefile

install_assets: $(DATA_PATH)
	mkdir -p $(DESTDIR)$(DATA_PATH)
	cp -r config/* $(DESTDIR)$(DATA_PATH)
EOF
	make prefix="${pkgdir}/usr/local" install_assets
	install -Dm644 License.txt ${pkgdir}/usr/share/licenses/${_gitname}/License.txt
	install -Dm755 ../attractplus.sh "${pkgdir}"/usr/local/bin/attractplus
}

